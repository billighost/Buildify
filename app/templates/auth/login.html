{% extends "base.html" %}

{% block title %}Login - Buildify{% endblock %}

{% block content %}
<!-- Auth Header -->
<section class="auth-header bg-primary text-white py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb breadcrumb-light">
                        <li class="breadcrumb-item"><a href="{{ url_for('main.home') }}">Home</a></li>
                        <li class="breadcrumb-item active text-white" aria-current="page">Login</li>
                    </ol>
                </nav>
                <h1 class="display-5 fw-bold mb-3">Welcome Back</h1>
                <p class="lead mb-0">Sign in to your Buildify account to continue building smarter.</p>
            </div>
            <div class="col-lg-6 text-lg-end d-none d-lg-block">
                <div class="auth-header-icon">
                    <i class="bi bi-person-check display-1 opacity-25"></i>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Login Form -->
<section class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-5 col-md-7">
                <div class="auth-card card border-0 shadow-lg">
                    <div class="card-body p-5">
                        <!-- Login Form -->
                        <form method="POST" action="" novalidate>
                            {{ form.hidden_tag() }}
                            
                            <div class="text-center mb-4">
                                <div class="auth-icon">
                                    <i class="bi bi-shield-lock text-primary"></i>
                                </div>
                                <h3 class="auth-title">Sign In</h3>
                                <p class="text-muted">Enter your credentials to access your account</p>
                            </div>

                            <!-- Email Field -->
                            <div class="mb-4">
                                <label for="email" class="form-label">Email Address</label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light border-end-0">
                                        <i class="bi bi-envelope text-muted"></i>
                                    </span>
                                    {% if form.email.errors %}
                                        {{ form.email(class="form-control is-invalid border-start-0", placeholder="Enter your email") }}
                                        <div class="invalid-feedback">
                                            {% for error in form.email.errors %}
                                                {{ error }}
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        {{ form.email(class="form-control border-start-0", placeholder="Enter your email") }}
                                    {% endif %}
                                </div>
                            </div>

                            <!-- Password Field -->
                            <div class="mb-4">
                                <div class="d-flex justify-content-between align-items-center">
                                    <label for="password" class="form-label">Password</label>
                                    <a href="#" class="text-primary text-decoration-none small">Forgot password?</a>
                                </div>
                                <div class="input-group">
                                    <span class="input-group-text bg-light border-end-0">
                                        <i class="bi bi-lock text-muted"></i>
                                    </span>
                                    {% if form.password.errors %}
                                        {{ form.password(class="form-control is-invalid border-start-0", placeholder="Enter your password") }}
                                        <div class="invalid-feedback">
                                            {% for error in form.password.errors %}
                                                {{ error }}
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        {{ form.password(class="form-control border-start-0", placeholder="Enter your password") }}
                                    {% endif %}
                                    <button class="btn btn-outline-secondary border-start-0" type="button" id="togglePassword">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Remember Me -->
                            <div class="mb-4">
                                <div class="form-check">
                                    {{ form.remember(class="form-check-input") }}
                                    <label class="form-check-label" for="remember">
                                        Remember me
                                    </label>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <div class="d-grid mb-4">
                                {{ form.submit(class="btn btn-primary btn-lg") }}
                            </div>

                            <!-- Divider -->
                            <div class="position-relative text-center mb-4">
                                <hr>
                                <span class="position-absolute top-50 start-50 translate-middle bg-white px-3 text-muted">or</span>
                            </div>

                            <!-- Social Login -->
                            <div class="d-grid gap-2 mb-4">
                                <button type="button" class="btn btn-outline-dark">
                                    <i class="bi bi-google me-2"></i>Continue with Google
                                </button>
                                <button type="button" class="btn btn-outline-primary">
                                    <i class="bi bi-facebook me-2"></i>Continue with Facebook
                                </button>
                            </div>

                            <!-- Sign Up Link -->
                            <div class="text-center">
                                <p class="mb-0">Don't have an account? 
                                    <a href="{{ url_for('auth.register') }}" class="text-primary text-decoration-none fw-semibold">Sign up here</a>
                                </p>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Security Notice -->
                <div class="card border-0 bg-light mt-4">
                    <div class="card-body text-center">
                        <div class="d-flex align-items-center justify-content-center">
                            <i class="bi bi-shield-check text-success me-2"></i>
                            <small class="text-muted">Your data is protected with bank-level security</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Preview -->
<section class="bg-light py-5">
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-8">
                <h3 class="mb-4">Why Buildify?</h3>
                <div class="row g-4">
                    <div class="col-md-4">
                        <div class="feature-preview">
                            <i class="bi bi-calculator text-primary display-6 mb-3"></i>
                            <h5>Accurate Calculations</h5>
                            <p class="text-muted small">Precise block counts and material estimates</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-preview">
                            <i class="bi bi-graph-up text-primary display-6 mb-3"></i>
                            <h5>Real-time Prices</h5>
                            <p class="text-muted small">Live market data from Nigerian suppliers</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-preview">
                            <i class="bi bi-shield-check text-primary display-6 mb-3"></i>
                            <h5>Secure & Private</h5>
                            <p class="text-muted small">Your data is always protected</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Toggle password visibility
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.querySelector('input[name="password"]');
    
    if (togglePassword && passwordInput) {
        togglePassword.addEventListener('click', function() {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            this.innerHTML = type === 'password' ? '<i class="bi bi-eye"></i>' : '<i class="bi bi-eye-slash"></i>';
        });
    }

    // Add floating labels effect
    const inputs = document.querySelectorAll('.form-control');
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.parentElement.classList.add('focused');
        });
        
        input.addEventListener('blur', function() {
            if (!this.value) {
                this.parentElement.classList.remove('focused');
            }
        });

        // Check initial state
        if (input.value) {
            input.parentElement.classList.add('focused');
        }
    });
});
</script>
{% endblock %}